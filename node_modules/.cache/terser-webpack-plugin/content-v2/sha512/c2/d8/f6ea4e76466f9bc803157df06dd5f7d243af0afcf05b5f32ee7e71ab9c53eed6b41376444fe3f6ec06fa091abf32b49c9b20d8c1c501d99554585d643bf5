{"code":"!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=0)}([function(e,t,a){a(1),function(){var e=new Error(\"Cannot find module './bindBestLoation.js'\");throw e.code=\"MODULE_NOT_FOUND\",e}()},function(e,t){var a=new google.maps.Geocoder;function n(e,t,a){var n={lat:t,lng:a};e.geocode({location:n},(function(e,t){\"OK\"===t?e[1]?document.getElementById(\"address\").value=e[0].formatted_address:document.getElementById(\"address\").value=\"No results found\":document.getElementById(\"address\").value=\"Geocoder failed due to: \"+t}))}var r=L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",{attribution:'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery Â© <a href=\"http://cloudmade.com\">CloudMade</a>',maxZoom:18}),o=new L.Map(document.getElementById(\"map\"),{center:new L.LatLng(42.3736,-71.1097),zoom:13,layers:[r]});o.on(\"click\",(function(e){for(var t in(y=new L.marker(e.latlng,{draggable:\"true\"})).on(\"click\",l),markercontainer.push(y),AllScores)document.getElementById(t).value=c(y.getLatLng().lat,y.getLatLng().lng,AllScores[t]);n(a,y.getLatLng().lat,y.getLatLng().lng);y.addTo(o),o.panTo(y.getLatLng()),y.on(\"dragend\",(function(e){var t=e.target,r=t.getLatLng();t.setLatLng(new L.LatLng(r.lat,r.lng),{draggable:\"true\"});n(a,t.getLatLng().lat,t.getLatLng().lng);for(var l in t.addTo(o),AllScores)document.getElementById(l).value=c(t.getLatLng().lat,t.getLatLng().lng,AllScores[l]);n(a,t.getLatLng().lat,t.getLatLng().lng);o.panTo(new L.LatLng(r.lat,r.lng))})),o.addLayer(y)}));function l(e){for(var t in AllScores)document.getElementById(t).value=c(e.latlng.lat,e.latlng.lng,AllScores[t]);n(a,e.latlng.lat,e.latlng.lng);o.panTo(new L.LatLng(e.latlng.lat,e.latlng.lng))}var g=new HeatmapOverlay({radius:.007,maxOpacity:.8,scaleRadius:!0,useLocalExtrema:!0,latField:\"lat\",lngField:\"lng\",valueField:\"count\",blur:.8});g.setData({max:0,data:[]});var d=L.layerGroup([g]);function c(e,t,a){return score=function(e,t,a){var n=a[0].lat,r=a[0].lng,o=Math.pow(Math.abs(e-n),2)+Math.pow(Math.abs(t-r),2),l=0;for(i=1;i<a.length;i++)currlat=a[i].lat,currlng=a[i].lng,currdist=Math.pow(Math.abs(e-currlat),2)+Math.pow(Math.abs(t-currlng),2),currdist<o&&(n=currlat,r=currlng,l=i,o=currdist);return a[l].count}(e,t,a.data),Math.round(1e3*score/a.max)/100}o.addLayer(d),document.getElementById(\"selectcity\").onchange=function(){var e=document.createElement(\"script\");e.setAttribute(\"src\",\"DataFiles/SoofaData\"+this.value.split(\" \")[0]+\".js\"),document.head.appendChild(e),e.onload=function(){g.setData({max:0,data:[]}),document.getElementById(\"layerselector\").reset(),o.panTo(new L.LatLng(lat,lng));for(var e=0;e<markercontainer.length;e++)o.removeLayer(markercontainer[e]);for(var t in markercontainer=[],layersactive=[],o.removeLayer(f),f=L.rectangle([northeastcoord,southwestcoord],{dashArray:\"10\",color:\"#4d4d4d\",opacity:.8,fillOpacity:0}),o.addLayer(f),AllScores)document.getElementById(t).value=\"\";document.getElementById(\"address\").value=\"\"}};var u=new google.maps.places.SearchBox(document.getElementById(\"mapsearch\"));google.maps.event.addListener(u,\"places_changed\",(function(){for(var e=0;e<u.getPlaces().length;e++){for(var t in(y=new L.marker([u.getPlaces()[e].geometry.location.lat(),u.getPlaces()[e].geometry.location.lng()],{draggable:\"true\"})).on(\"click\",l),markercontainer.push(y),AllScores)document.getElementById(t).value=c(y.getLatLng().lat,y.getLatLng().lng,AllScores[t]);n(a,y.getLatLng().lat,y.getLatLng().lng);y.addTo(o),o.panTo(y.getLatLng()),y.on(\"dragend\",(function(e){var t=e.target,r=t.getLatLng();t.setLatLng(new L.LatLng(r.lat,r.lng),{draggable:\"true\"});n(a,t.getLatLng().lat,t.getLatLng().lng);for(var l in t.addTo(o),AllScores)document.getElementById(l).value=c(t.getLatLng().lat,t.getLatLng().lng,AllScores[l]);document.getElementById(\"address\").value=u.getPlaces()[0].address,o.panTo(new L.LatLng(r.lat,r.lng))})),o.addLayer(y)}}));var s=document.getElementById(\"scorebutton\"),m=!1;s.onclick=function(){m?(document.getElementById(\"scoresform\").style.visibility=\"hidden\",m=!m):(document.getElementById(\"scoresform\").style.visibility=\"visible\",m=!m)};var f=L.rectangle([northeastcoord,southwestcoord],{dashArray:\"10\",color:\"#4d4d4d\",opacity:.8,fillOpacity:0});o.addLayer(f),centroids=findBestLocation(5,googlefoodData),console.log(centroids);for(let e of centroids){var y=new L.marker([e.x,e.y],{draggable:\"true\"}).addTo(o);y.on(\"click\",l)}}]);","extractedComments":[]}